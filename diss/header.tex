\usepackage{amssymb}

\usepackage{amsmath}
\usepackage[a4paper,includeheadfoot,margin=2.54cm]{geometry}
\usepackage{breqn}
\usepackage{amssymb}

\usepackage{amsmath}
\usepackage[a4paper,includeheadfoot,margin=2.54cm]{geometry}
\usepackage{breqn}
\usepackage{array}   % for \newcolumntype macro
\usepackage{tikz-cd}
\usepackage{tabstackengine}
\setstackEOL{\cr}
\setstackgap{L}{\normalbaselineskip}

\newcommand\todo[1]{\textbf{TODO: #1}}

\newcommand{\s}{\indent}
\newcommand{\doin}[3]{\texttt{do}\s #1 \leftarrow #2 \s\texttt{in}\s #3}
\newcommand\apply[2]{#1\s#2}
\newcommand\ifthenelse[5]{\texttt{if}_{#1, #2}\s#3\s \texttt{then}\s #4 \s\texttt{else} \s#5}
\newcommand\const[1]{\texttt{C}^{#1}}
\newcommand\return[1]{\texttt{return} #1}
\newcommand\lam[3]{\lambda #1 : #2. #3}
\renewcommand\u[0]{\texttt{()}}
\newcommand{\U}[0]{\texttt{Unit}}
\renewcommand\t[0]{\texttt{true}}
\newcommand\f[0]{\texttt{false}}
\newcommand{\B}[0]{\texttt{Bool}}
\newcommand{\G}[0]{\Gamma}
\newcommand\D{\Delta}


% draw type relations
\newcommand{\typerelation}[3]{#1 \vdash #2 \colon #3}
\newcommand{\gtyperelation}[2]{\typerelation{\G}{#1}{#2}}

%draw tree rules
\newcommand{\treerule}[3]{(\text{#1}) \frac{#2}{#3}}
\newcommand{\condtreerule}[4]{\treerule{#1}{#2}{#3}(\text{if } #4)}

\newcommand{\subtype}[0]{\leq:}
\newcommand\subeffect[0]{\leq}

\newcommand{\M}[2]{\texttt{M}_{#1}{#2}}

\newcommand\lamtype[3]{#1 \rightarrow \M{#2}{#3}}
\newcommand{\1}[0]{\texttt{1}}

\newcommand\e[0]{\epsilon}

\newcommand{\db}[1]{{\bf [\![}#1{\bf ]\!]}}
\newcommand{\deno}[1]{\db{#1}_M}
\newcommand\after\circ
\newcommand\term[1]{\left\langle\right\rangle_{#1}}

\newcommand\point[1]{\eta_{#1}}
\newcommand\bind[3]{\mu_{#1, #2, #3}}

\newcommand\T[2]{T_{#1}{#2}}
\newcommand\cur[1]{\texttt{cur}(#1)}
\newcommand\ifd[2]{\texttt{if}_{#1, #2}}
\newcommand\pr[2]{\left\langle#1, #2\right\rangle}

% tensor strength Nat-tran
\newcommand\tstrength[3]{\texttt{t}_{#1, #2, #3}}

% Id morphism
\newcommand\Id[1]{\texttt{Id}_{#1}}
% beta-eta equivalence
\newcommand\beequiv[0]{=_{\beta\eta}}
% Single substitution
\newcommand{\ssub}[2]{\left[#2 / #1\right]}

% beta-eta equivalence relation
\newcommand{\berelation}[4]{\typerelation{#1}{#2 \beequiv #3}{#4}}
\newcommand{\gberelation}[3]{\gtyperelation{#1 \beequiv #2}{#3}}


% Shortcuts for denotational equality
\newcommand{\denoequality}[4]{\deno{\typerelation{#1}{#2}{#4}} = \deno{\typerelation{#1}{#3}{#4}}}
\newcommand{\gdenoequality}[3]{\denoequality{\G}{#1}{#2}{#3}}

% Shorthand for monad types
\newcommand\mea[0]{\M{\e}{A}}
\newcommand\meb[0]{\M{\e}{B}}

% Shorthand for Gammas
\newcommand{\gax}[0]{\G, x: A}
\newcommand{\gby}[0]{\G, y: B}

% reduction function
\newcommand{\reduce}[0]{reduce}



% Combinators for building delta-based tree proof terms
\newcommand{\deltavrule}[4]{
    \treerule{Subtype}{\treerule{}{\D}{\typerelation{#1}{#2}{#3}}\s\s #3 \subtype #4}{\typerelation{#1}{#2}{#4}}}

\newcommand{\deltavruleprime}[4]{
    \treerule{Subtype}{\treerule{}{\D'}{\typerelation{#1}{#2}{#3}}\s\s #3 \subtype #4}{\typerelation{#1}{#2}{#4}}}

\newcommand{\p}[0]{\pi_1}
\newcommand{\pp}[0]{\pi_2}

% shorthands for weakening
\newcommand{\wrel}[3]{#1 : #2 \triangleright #3}
\newcommand{\ok}[1]{#1 \texttt{Ok}}
\renewcommand\i[0]{\iota}
\newcommand\w{\omega}
\newcommand\dom[1]{\texttt{dom}(#1)}
\newcommand\x{\times}


% Combinators to build tree proofs
\newcommand{\truleconst}[0]{\treerule{Const}{\ok{\G}}{\gtyperelation{\const{A}}{A}}}
\newcommand{\truleunit}[0]{\treerule{Unit}{\ok{\G}}{\typerelation{\G}{\u}{\U}}}
\newcommand{\truletrue}[0]{\treerule{True}{\ok{\G}}{\typerelation{\G}{\t}{\B}}}
\newcommand{\trulefalse}[0]{\treerule{False}{\ok{\G}}{\typerelation{\G}{\f}{\B}}}
