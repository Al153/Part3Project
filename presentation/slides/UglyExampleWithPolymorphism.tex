
\begin{frame}[fragile]{An Ugly Example - With a Makeover}

    \todo{Syntax highlighting}
    \begin{lstlisting}[
        mathescape,
        columns=fullflexible,
        basicstyle=\fontfamily{lmvtt}\selectfont,
      ]
let $twice$ = $\Lambda$ $eff$.(
    $\lambda$ $action$: $\M{eff}{\U}$. (
        do $\_$ $\texttt{<-}$ $action$ in $action$
    )
)

do $\_$ $\texttt{<-}$ ($twice$ State increment) in ($twice$ IO writeLog)
    \end{lstlisting}
    \script{
        - We've now added polymorphism, which makes our ugly program more concise.
        - We can reuse this function
    }
\end{frame}